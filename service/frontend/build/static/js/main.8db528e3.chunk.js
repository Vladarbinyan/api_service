(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{156:function(t,e,n){},252:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),o=n(29),r=n.n(o),c=(n(155),n(156),n(63)),i=n(64),u=n(93),j=n(76),l=n(71),d=n(255),h=n(8),b=d.a.Column,x=function(t){var e=t.users;return Object(h.jsxs)(d.a,{dataSource:e,children:[Object(h.jsx)(b,{title:"Username",dataIndex:"username"},"username"),Object(h.jsx)(b,{title:"First Name",dataIndex:"first_name"},"first_name"),Object(h.jsx)(b,{title:"Last Name",dataIndex:"last_name"},"last_name"),Object(h.jsx)(b,{title:"Email address",dataIndex:"email"},"email")]})},O=n(254),f=O.a.Footer,p=function(t){var e=t.footer;return Object(h.jsx)(f,{style:{textAlign:"center"},children:Object(h.jsx)("div",{className:"footer",children:e})})},m=n(58),g=n(51),k=O.a.Header,v=function(t){Object(j.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"logout",value:function(){this.props.logout()}},{key:"render",value:function(){var t=this;return Object(h.jsx)(k,{children:Object(h.jsxs)(m.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:this.props.default_key,children:[Object(h.jsx)(m.a.Item,{children:Object(h.jsx)(g.b,{to:"/users",children:"Users"})},"1"),Object(h.jsx)(m.a.Item,{children:Object(h.jsx)(g.b,{to:"/projects",children:"Projects"})},"2"),Object(h.jsx)(m.a.Item,{children:Object(h.jsx)(g.b,{to:"/todo",children:"TODO"})},"3"),Object(h.jsx)(m.a.Item,{style:{float:"right"},children:this.props.is_authenticated?Object(h.jsxs)(g.b,{onClick:function(){return t.logout()},children:["Logout (",this.props.username,")"]}):Object(h.jsx)(g.b,{to:"/login",children:"Login"})},"4")]})})}}]),n}(s.a.Component),_=O.a.Content,y=function(t){var e=t.location;return Object(h.jsx)(_,{style:{textAlign:"center"},children:Object(h.jsxs)("h1",{children:["Page '",e.pathname,"' not found!"]})})},I=n(258),S=d.a.Column,C=function(t){var e=t.projects,n=t.deleteProject;return Object(h.jsxs)(d.a,{dataSource:e,children:[Object(h.jsx)(S,{title:"Action",render:function(t,e){return Object(h.jsxs)(I.b,{size:"middle",children:[Object(h.jsx)("a",{children:"Modify"}),Object(h.jsx)("a",{onClick:function(){return n(e.uuid)},children:"Delete"})]})}},"action"),Object(h.jsx)(S,{title:"Project",dataIndex:"title"},"title")]})},P=d.a.Column,w=function(t){var e=t.todo;return Object(h.jsxs)(d.a,{dataSource:e,children:[Object(h.jsx)(P,{title:"TODO",dataIndex:"todo"},"todo"),Object(h.jsx)(P,{title:"Text",dataIndex:"text"},"text"),Object(h.jsx)(P,{title:"Created",dataIndex:"create_date"},"create_date")]})},T=n(143),F=n(256),L=n(257),A=n(44),D=function(t){Object(j.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).handleSubmit=function(t){a.props.get_token(t.login,t.password)},a.state={login:"",password:""},a}return Object(i.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(T.a)({},t.target.name,t.target.value))}},{key:"render",value:function(){return Object(h.jsx)(F.a,{onFinish:this.handleSubmit,children:Object(h.jsxs)(L.a.Group,{children:[Object(h.jsx)(F.a.Item,{style:{float:"left"},label:"Username",name:"login",rules:[{required:!0,message:"Please input your username!"}],children:Object(h.jsx)(L.a,{})}),Object(h.jsx)(F.a.Item,{style:{float:"left"},label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(h.jsx)(L.a.Password,{})}),Object(h.jsx)(F.a.Item,{children:Object(h.jsx)(A.a,{type:"primary",htmlType:"submit",value:"Login",children:"Login"})})]})})}}]),n}(s.a.Component),E=n(80),z=n.n(E),B=n(24),M=n(115),N=function(t){return"".concat("http://127.0.0.1:8000").concat(t)},U=function(t){Object(j.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).logout=a.logout.bind(Object(u.a)(a)),a.state={users:[],projects:[],todo:[],token:"",username:""},a}return Object(i.a)(n,[{key:"set_token",value:function(t,e){var n=this,a=new M.a;a.set("token",t),a.set("username",e),this.setState({token:t,username:e},(function(){return n.load_data()}))}},{key:"is_authenticated",value:function(){return""!==this.state.token}},{key:"logout",value:function(){this.set_token("","")}},{key:"get_token_from_storage",value:function(){var t=this,e=new M.a,n=e.get("token"),a=e.get("username");this.setState({token:n,username:a},(function(){return t.load_data()}))}},{key:"get_token",value:function(t,e){var n=this;z.a.post(N("/api-token-auth/"),{username:t,password:e}).then((function(e){n.set_token(e.data.token,t)})).catch((function(t){return alert("Bad login or password!")}))}},{key:"get_headers",value:function(){var t={"Content-Type":"application/json"};return this.is_authenticated()&&(t.Authorization="Token "+this.state.token),t}},{key:"load_data",value:function(){var t=this,e=this.get_headers();z.a.get(N("/api/users/"),{headers:e}).then((function(e){t.setState({users:e.data.results})})).catch((function(e){console.log(e),t.setState({users:[]})})),z.a.get(N("/api/projects/"),{headers:e}).then((function(e){t.setState({projects:e.data.results})})).catch((function(e){console.log(e),t.setState({projects:[]})})),z.a.get(N("/api/todo/"),{headers:e}).then((function(e){t.setState({todo:e.data.results})})).catch((function(e){console.log(e),t.setState({todo:[]})}))}},{key:"deleteProject",value:function(t){var e=this,n=this.get_headers();z.a.delete("http://127.0.0.1:8000/api/projects/".concat(t),{headers:n}).then((function(n){e.setState({projects:e.state.projects.filter((function(e){return e.uuid!==t}))})})).catch((function(t){return console.log(t)}))}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"render",value:function(){var t=this;return Object(h.jsx)("div",{children:Object(h.jsxs)(g.a,{children:[Object(h.jsx)("div",{children:Object(h.jsx)(v,{default_key:"1",is_authenticated:this.is_authenticated(),logout:this.logout,username:this.state.username})}),Object(h.jsxs)(B.c,{children:[Object(h.jsx)(B.a,{exact:!0,path:"/",component:function(){return Object(h.jsx)(x,{users:t.state.users})}}),Object(h.jsx)(B.a,{exact:!0,path:"/users",component:function(){return Object(h.jsx)(x,{users:t.state.users})}}),Object(h.jsx)(B.a,{exact:!0,path:"/projects",component:function(){return Object(h.jsx)(C,{projects:t.state.projects,deleteProject:function(e){return t.deleteProject(e)}})}}),Object(h.jsx)(B.a,{exact:!0,path:"/todo",component:function(){return Object(h.jsx)(w,{todo:t.state.todo})}}),Object(h.jsx)(B.a,{exact:!0,path:"/login",component:function(){return Object(h.jsx)(D,{get_token:function(e,n){return t.get_token(e,n)}})}}),Object(h.jsx)(B.a,{component:y})]}),Object(h.jsx)("div",{children:Object(h.jsx)(p,{footer:"API SERVICE 2021"})})]})})}}]),n}(s.a.Component),q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,259)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),a(t),s(t),o(t),r(t)}))};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(U,{})}),document.getElementById("root")),q()}},[[252,1,2]]]);
//# sourceMappingURL=main.8db528e3.chunk.js.map